version: 1.0.{build}
image: Visual Studio 2022
build: off

install:
  - choco install firefox -y
  - choco install tightvnc -y
  - choco install ngrok -y
  - tightvncserver -setpasswd vncpassword123
  - sc config WinVNC start= auto
  - net start WinVNC

  # Set ngrok authtoken (Replace THIS_TOKEN)
  - ngrok config add-authtoken YOUR_NGROK_AUTHTOKEN_HERE

  # Start ngrok tunnel for port 5900 (VNC)
  - start /B ngrok tcp 5900

  # Show ngrok public TCP address
  - curl http://127.0.0.1:4040/api/tunnels > tunnels.json
  - type tunnels.json

test_script:
  - echo "ðŸ”¥ Remote Desktop is launching..."
  - timeout /t 1800
